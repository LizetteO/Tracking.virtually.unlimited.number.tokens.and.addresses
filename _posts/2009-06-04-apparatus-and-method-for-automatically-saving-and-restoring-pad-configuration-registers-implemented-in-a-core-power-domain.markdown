---

title: Apparatus and method for automatically saving and restoring pad configuration registers implemented in a core power domain
abstract: According to various illustrative embodiments, an apparatus, system, and method for automatically saving and restoring pad configuration registers implemented in a core power domain are described. In one aspect, the apparatus comprises a save and restore logic component implemented in the core power domain and coupled to the pad configuration registers. The apparatus also comprises a memory instantiated in an always-on power domain and coupled to the save and restore logic component, the save and restore logic component implemented in the core power domain to automatically save the pad configuration registers in the memory in a pad configuration save process before a power supply to the core power domain is switched off and to automatically restore the pad configuration registers from the memory in a pad configuration restore process after the power supply to the core power domain is switched on.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08117428&OS=08117428&RS=08117428
owner: Texas Instruments Incorporated
number: 08117428
owner_city: Dallas
owner_country: US
publication_date: 20090604
---
The present disclosure relates generally to automatically saving and restoring pad configuration registers in information handling systems. More particularly the present disclosure describes an apparatus system and method useful for automatically saving and restoring pad configuration registers implemented in a core power domain.

The power supply to a core power domain is switched off to reduce power leakage in standby mode. However switching off the power supply to the core power domain causes loss of information from the pad configuration registers that are implemented in the core power domain. The pad configuration registers may need to be restored when the power supply to the core power domain is switched back on. No external memory is accessible until the pad configuration registers are restored for example. Furthermore only a limited number of inputs and or outputs are allowed at the boundary between the core power domain and an always on power domain to avoid routing congestion.

Conventional D flip flop implementations can have power leakage from the chip as high as 5.6 W. Moreover conventional D flip flop implementations can occupy a chip area as large as 0.05 mm. Conventional placement of the pad configuration registers in the always on power domain leads to undesirable place and route congestion. Conventionally software interactions are needed to restore the pad configuration registers.

According to various illustrative embodiments an apparatus system and method for automatically saving and restoring pad configuration registers implemented in a core power domain are described. In one aspect the apparatus comprises a hardware save and restore logic component implemented in the core power domain and coupled to the pad configuration registers. The apparatus also comprises a memory instantiated in an always on power domain and coupled to the hardware save and restore logic component the hardware save and restore logic component implemented in the core power domain to automatically save the pad configuration registers in the memory in a pad configuration save process before a power supply to the core power domain is switched off and to automatically restore the pad configuration registers from the memory in a pad configuration restore process after the power supply to the core power domain is switched on.

In another aspect a method for automatically saving and restoring pad configuration registers implemented in a core power domain comprises automatically saving the pad configuration registers in a memory instantiated in an always on power domain and coupled to a hardware save and restore logic component implemented in the core power domain and coupled to the pad configuration registers automatically saving the pad configuration registers before a power supply to the core power domain is switched off. The method also comprises automatically restoring the pad configuration registers from the memory after the power supply to the core power domain is switched on.

In yet another aspect a system for automatically saving and restoring pad configuration registers implemented in a control module in a core power domain is provided the system comprising a hardware save and restore logic component implemented in the control module in the core power domain and coupled to the pad configuration registers. The system also comprises a power manager instantiated in an always on power domain and coupled to the hardware save and restore logic component. The system also comprises a memory instantiated in a wakeup control module in the always on power domain and coupled to the hardware save and restore logic component the hardware save and restore logic component implemented in the control module in the core power domain to automatically save the pad configuration registers in the memory in a pad configuration save process before a power supply to the core power domain is switched off and to automatically restore the pad configuration registers from the memory in a pad configuration restore process after the power supply to the core power domain is switched on wherein the pad configuration restore process is started by the power manager after the power supply to the core power domain is switched on.

It is to be noted however that the appended drawings illustrate only typical embodiments of the present claimed subject matter and are therefore not to be considered limiting of the scope of the present claimed subject matter as the present claimed subject matter may admit to other equally effective embodiments.

Certain terms are used throughout the following description and claims to refer to particular system components and configurations. As one skilled in the art having the benefit of the present disclosure will appreciate companies may refer to a component by different names. This document does not intend to distinguish between components that differ in name but not function. In the following discussion and in the claims the terms including and comprising are used in an open ended fashion and thus should be interpreted to mean including but not limited to . . . and so forth. Also the term couple or couples is intended to mean either an indirect or direct electrical connection. Thus if a first device couples to a second device that connection may be through a direct electrical connection or though an indirect electrical connection via other devices and or connections. Furthermore the term information is intended to refer to any data instructions or control sequences that may be communicated between components of a device. For example if information is sent between two components data instructions control sequences or any combination thereof may be sent between the two components.

Illustrative embodiments of the present claimed subject matter are described in detail below. In the interest of clarity not all features of an actual implementation are described in this specification. It will of course be appreciated that in the development of any such actual embodiment numerous implementation specific decisions must be made to achieve the developers specific goals such as compliance with system related and business related constraints which will vary from one implementation to another. Moreover it will be appreciated that such a development effort might be complex and time consuming but would nevertheless be a routine undertaking for those of ordinary skill in the art having the benefit of the present disclosure.

In various illustrative embodiments as shown in for example an apparatus for automatically saving and restoring pad configuration registers implemented in a core power domain may comprise a hardware save and restore logic component implemented in the core power domain and coupled to the pad configuration registers . The apparatus may also comprise a memory instantiated in an always on power domain and coupled to the hardware save and restore logic component . In various illustrative embodiments the memory may be a static random access memory SRAM implemented in the always on power domain . The hardware save and restore logic component may be implemented in the core power domain to automatically save the pad configuration registers in the memory in a pad configuration save process before a power supply to the core power domain is switched off. The hardware save and restore logic component may also be implemented in the core power domain to automatically restore the pad configuration registers from the memory in a pad configuration restore process after the power supply to the core power domain is switched on.

In various illustrative embodiments the pad configuration save process is started before the power supply to the core power domain is switched off. In various illustrative embodiments the pad configuration save process is started by software and or firmware and or an ASIC before the power supply to the core power domain is switched off. In various illustrative embodiments once the save process is started switching the core power domain off may be gated until the save process is complete. As shown in for example the pad configuration save process may be started by having a start save signal sent from the pad configuration registers to the hardware save and restore logic component before the power supply to the core power domain is switched off. Similarly as also shown in for example the pad configuration save process may be completed by having a save done signal sent from the hardware save and restore logic component to the pad configuration registers before the power supply to the core power domain is switched off.

In various illustrative embodiments as shown in for example the apparatus for automatically saving and restoring pad configuration registers implemented in a core power domain may further comprise a power manager instantiated in the always on power domain and coupled to the hardware save and restore logic component . The pad configuration restore process is started by the power manager after the power supply to the core power domain is switched on. As shown in for example the pad configuration restore process may be started by the power manger by having a start restore signal sent from the power manger to the hardware save and restore logic component after the power supply to the core power domain is switched on. Similarly as also shown in for example the pad configuration restore process may be completed by having a restore done signal sent from the hardware save and restore logic component to the power manger after the power supply to the core power domain is switched on.

In various illustrative embodiments as shown in for example the pad configuration registers are automatically saved in a portion of the memory to which one or more other write commands are disabled. For example once the pad configuration registers have been automatically saved in the portion of the memory any subsequent write commands directed to the portion of the memory are not enabled keeping the pad configuration registers that have been automatically saved in the portion of the memory from being overwritten.

As shown in the hardware save and restore logic component and or the pad configuration registers may be coupled through a bus for example to other components of an information handling system not shown . Similarly the pad configuration registers may be coupled to respective pads not shown .

In various illustrative embodiments the apparatus reduces power leakage from a chip relative to a flip flop implementation and reduces an area of the chip occupied relative to the flip flop implementation. For example as described above conventional D flip flop implementations can have power leakage from the chip as high as 5.6 W. Moreover conventional D flip flop implementations can occupy a chip area as large as 0.05 mm. By way of contrast in various illustrative embodiments the power leakage from a chip may be reduced to about 3 W and may occupy a chip area of only about 0.03 mm.

As also described above conventional placement of pad configuration registers in an always on power domain leads to undesirable place and route congestion. By way of contrast in various illustrative embodiments the apparatus reduces place and route congestion relative to an implementation having the pad configuration registers instantiated in the always on power domain .

Moreover as also described above conventionally software interactions are needed to restore the pad configuration registers. By way of contrast in various illustrative embodiments the hardware save and restore logic component permits much higher performance by not requiring any software interaction to automatically restore the pad configuration registers . The hardware save and restore logic component may be implemented in the core power domain to automatically save the pad configuration registers in the memory in the pad configuration save process before the power supply to the core power domain is switched off. The hardware save and restore logic component may also be implemented in the core power domain to automatically restore the pad configuration registers from the memory in the pad configuration restore process after the power supply to the core power domain is switched on.

Upon receiving a start save signal from the pad configuration registers the hardware save and restore logic component may transition to a state of saving the pad configuration registers in the memory before the power supply to the core power domain is switched off. Upon completion of saving the pad configuration registers in the memory before the power supply to the core power domain is switched off the hardware save and restore logic component may send a save done signal to the pad configuration registers . The hardware save and restore logic component may then transition to a state that is ready to restore the pad configuration registers in the memory instantiated in the always on power domain while the power supply to the core power domain is switched off before the power supply to the core power domain is switched on.

Upon receiving a start restore signal from the power manager the hardware save and restore logic component may transition to a state of restoring the pad configuration registers from the memory after the power supply to the core power domain is switched on. Upon completion of restoring the pad configuration registers from the memory after the power supply to the core power domain is switched on the hardware save and restore logic component may send a restore done signal to the power manger and may transition to the state .

In various illustrative embodiments the control module and the wakeup control module interface may use an open core protocol OCP clock divided by four to reduce power consumption in the always on power domain in which the wakeup control module is instantiated. For example as shown at in the Clk signal may have one clock cycle lasting about 48 ns as shown by the double headed arrow . The Read Write Transfer RnW signal may be as shown at . The Addr signal may be as shown at . The DataIn signal may be as shown at . The DataOut signal may be as shown at . The PadWrAccess signal may be as shown at showing a logical 1 or high value throughout the timing sequence shown in for example. The dashed line at a falling edge of a clock cycle may schematically illustrate data sampled in the control module . In various illustrative embodiments the control module clock output may be provided as a clock input for the wakeup control module by being inverted meaning that address and data have half a cycle of setup time and half a cycle of hold time. There may be about a one and a half period margin used to take into account round trip data propagation from the control module to the wakeup control module and back. The address map may be as shown in Table 2.

In various illustrative embodiments as shown in for example automatically saving the pad configuration registers may be started by having a start save signal sent from the pad configuration registers to the hardware save and restore logic component before the power supply to the core power domain is switched off. As also shown in for example automatically saving the pad configuration registers may be completed by having a save done signal sent from the hardware save and restore logic component to the pad configuration registers before the power supply to the core power domain is switched off.

In various illustrative embodiments as shown in for example the method useful for automatically saving and restoring the pad configuration registers implemented in the core power domain may further comprise providing a power manger instantiated in the always on power domain and coupled to the hardware save and restore logic component . Automatically restoring the pad configuration registers is started by the power manger after the power supply to the core power domain is switched on. As shown in for example automatically restoring the pad configuration registers may be started by the power manger by having a start restore signal sent from the power manger to the hardware save and restore logic component after the power supply to the core power domain is switched on. As shown in for example automatically restoring the pad configuration registers may be completed by having a restore done signal sent from the hardware save and restore logic component to the power manger after the power supply to the core power domain is switched on.

In various illustrative embodiments as shown in for example automatically saving the pad configuration registers may further comprise automatically saving the pad configuration registers in a portion of the memory to which one or more other write commands are disabled. For example as described above once the pad configuration registers have been automatically saved in the portion of the memory any subsequent write commands directed to the portion of the memory may not be enabled keeping the pad configuration registers that have been automatically saved in the portion of the memory from being overwritten.

In various illustrative embodiments the method reduces power leakage from a chip relative to a flip flop method and reduces an area of the chip occupied relative to the flip flop method. For example as described above conventional D flip flop implementations can have power leakage from the chip as high as 5.6 W. Moreover conventional D flip flop implementations can occupy a chip area as large as 0.05 mm. By way of contrast in various illustrative embodiments the power leakage from a chip may be reduced to about 3 W and may occupy a chip area of only about 0.03 mm.

Similarly as also described above conventional placement of pad configuration registers in an always on power domain leads to undesirable place and route congestion. By way of contrast in various illustrative embodiments the method reduces place and route congestion relative to a method having the pad configuration registers instantiated in the always on power domain .

According to various illustrative embodiments an apparatus system and method for automatically saving and restoring pad configuration registers implemented in a core power domain are described. In one aspect the apparatus comprises a hardware save and restore logic component implemented in the core power domain and coupled to the pad configuration registers. The apparatus also comprises a memory instantiated in an always on power domain and coupled to the hardware save and restore logic component the hardware save and restore logic component implemented in the core power domain to automatically save the pad configuration registers in the memory in a pad configuration save process before a power supply to the core power domain is switched off and to automatically restore the pad configuration registers from the memory in a pad configuration restore process after the power supply to the core power domain is switched on.

In various aspects the apparatus further comprises the pad configuration save process being started before the power supply to the core power domain is switched off. This apparatus further comprises the pad configuration save process being started by having a start save signal sent from the pad configuration registers to the hardware save and restore logic component before the power supply to the core power domain is switched off. This apparatus further comprises the pad configuration save process being completed by having a save done signal sent from the hardware save and restore logic component to the pad configuration registers before the power supply to the core power domain is switched off.

In various aspects the apparatus further comprises a power manager instantiated in the always on power domain and coupled to the hardware save and restore logic component wherein the pad configuration restore process is started by the power manager after the power supply to the core power domain is switched on. This apparatus further comprises the pad configuration restore process being started by the power manager by having a start restore signal sent from the power manager to the hardware save and restore logic component after the power supply to the core power domain is switched on. This apparatus further comprises the pad configuration restore process being completed by having a restore done signal sent from the hardware save and restore logic component to the power manager after the power supply to the core power domain is switched on.

In various aspects the apparatus further comprises the pad configuration registers being automatically saved in a portion of the memory to which one or more other write commands are disabled.

In various aspects the apparatus further comprises the apparatus reducing power leakage from a chip relative to a flip flop implementation and reducing an area of the chip occupied relative to the flip flop implementation.

In various aspects the apparatus further comprises the apparatus reducing place and route congestion relative to an implementation having the pad configuration registers instantiated in the always on power domain.

In another aspect a method for automatically saving and restoring pad configuration registers implemented in a core power domain comprises automatically saving the pad configuration registers in a memory instantiated in an always on power domain and coupled to a hardware save and restore logic component implemented in the core power domain and coupled to the pad configuration registers automatically saving the pad configuration registers before a power supply to the core power domain is switched off. The method also comprises automatically restoring the pad configuration registers from the memory after the power supply to the core power domain is switched on.

In various aspects the method further comprises automatically saving the pad configuration registers being started by having a start save signal sent from the pad configuration registers to the hardware save and restore logic component before the power supply to the core power domain is switched off. This method further comprises automatically saving the pad configuration registers being completed by having a save done signal sent from the hardware save and restore logic component to the pad configuration registers before the power supply to the core power domain is switched off.

In various aspects the method further comprises providing a power manager instantiated in the always on power domain and coupled to the hardware save and restore logic component wherein automatically restoring the pad configuration registers is started by the power manager after the power supply to the core power domain is switched on. This method further comprises automatically restoring the pad configuration registers being started by the power manager by having a start restore signal sent from the power manager to the hardware save and restore logic component after the power supply to the core power domain is switched on. This method further comprises automatically restoring the pad configuration registers being completed by having a restore done signal sent from the hardware save and restore logic component to the power manager after the power supply to the core power domain is switched on.

In various aspects the method further comprises automatically saving the pad configuration registers in a portion of the memory to which one or more other write commands are disabled.

In various aspects the method further comprises the method reducing power leakage from a chip relative to a flip flop method and reducing an area of the chip occupied relative to the flip flop method.

In various aspects the method further comprises the method reducing place and route congestion relative to a method having the pad configuration registers instantiated in the always on power domain.

In yet another aspect a system for automatically saving and restoring pad configuration registers implemented in a control module in a core power domain is provided the system comprising a hardware save and restore logic component implemented in the control module in the core power domain and coupled to the pad configuration registers. The system also comprises a power manager instantiated in an always on power domain and coupled to the hardware save and restore logic component. The system also comprises a memory instantiated in a wakeup control module in the always on power domain and coupled to the hardware save and restore logic component the hardware save and restore logic component implemented in the control module in the core power domain to automatically save the pad configuration registers in the memory in a pad configuration save process before a power supply to the core power domain is switched off and to automatically restore the pad configuration registers from the memory in a pad configuration restore process after the power supply to the core power domain is switched on wherein the pad configuration restore process is started by the power manager after the power supply to the core power domain is switched on.

In accordance with the present disclosure an apparatus system and method useful for automatically saving and restoring pad configuration registers implemented in a core power domain are disclosed. In various aspects an apparatus in accordance with the present disclosure may comprise means for automatically saving and restoring pad configuration registers and means for enabling the means for automatically saving and restoring pad configuration registers both the means for automatically saving and restoring pad configuration registers and the means for enabling the means for automatically saving and restoring pad configuration registers covering corresponding structures and or materials described herein and equivalents thereof.

In various other aspects a system in accordance with the present disclosure may comprise means for automatically saving and restoring pad configuration registers means for enabling the means for automatically saving and restoring pad configuration registers and means for using the means for automatically saving and restoring pad configuration registers all of the means for automatically saving and restoring pad configuration registers the means for enabling the means for automatically saving and restoring pad configuration registers and the means for using the means for automatically saving and restoring pad configuration registers covering corresponding structures and or materials described herein and equivalents thereof. In yet various other aspects a method in accordance with the present disclosure may comprise steps for automatically saving and restoring pad configuration registers and steps for enabling the steps for automatically saving and restoring pad configuration registers both the steps for automatically saving and restoring pad configuration registers and the steps for enabling the steps for automatically saving and restoring pad configuration registers covering corresponding acts described herein and equivalents thereof.

The particular embodiments disclosed above are illustrative only as the present claimed subject matter may be modified and practiced in different but equivalent manners apparent to those skilled in the art having the benefit of the teachings herein. Furthermore no limitations are intended to the details of construction or design herein shown other than as described in the claims below. It is therefore evident that the particular illustrative embodiments disclosed above may be altered or modified and all such variations are considered within the scope and spirit of the present claimed subject matter. In particular every range of values of the form from about a to about b or equivalently from approximately a to b or equivalently from approximately a b disclosed herein is to be understood as referring to the power set the set of all subsets of the respective range of values in the sense of Georg Cantor. Accordingly the protection sought herein is as set forth in the claims below.

