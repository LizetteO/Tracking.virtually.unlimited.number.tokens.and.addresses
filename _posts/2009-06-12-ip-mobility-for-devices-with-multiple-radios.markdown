---

title: IP mobility for devices with multiple radios
abstract: A wireless transmit/receive unit (WTRU) includes a mobility management function and a multihoming function. The mobility management function may implement the Media Independent Handover (MIH) protocol and the multihoming function may implement the Shim6 protocol. The mobility management function may communicate link status information to the multihoming function. Based on the link status information, the multihoming function may accelerate or decelerate a link failure detection procedure, may modify a list of possible paths for consideration for a path exploration procedure, and/or may determine to initiate a path exploration procedure. The multihoming function may communicate to the mobility management function that additional communications resources are required. In response, the mobility management function may activate an inactive radio interface. Subsequent path exploration procedures may include the exploration of paths that may be established over the activated radio interface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08259592&OS=08259592&RS=08259592
owner: InterDigital Patent Holdings, Inc.
number: 08259592
owner_city: Wilmington
owner_country: US
publication_date: 20090612
---
This application claims the benefit of U.S. Provisional Application No. 61 092 990 filed on Aug. 29 2008 which is incorporated by reference as if fully set forth.

Multihoming is the configuration of multiple Internet Protocol IP addresses on a device participating in an IP network. Multihoming may be accomplished through different approaches including assigning multiple IP addresses to a single link and employing multiple physical interfaces with distinct IP addresses. Multihoming may be used to split data into parallel streams so as to increase throughput and reliability. For example a data stream may be received at a host over three parallel streams over three distinct IP addresses over three distinct links. The received data may then be recombined at the host.

In the context of IP version 6 IPv6 the Internet Engineering Task Force IETF Shim6 protocol may be employed to facilitate multihoming. Shim 6 is host based and offers features such as the ability to manage several IP paths failure detection and recovery and best path selection. In IP version 4 IPv4 multihoming address prefixes were required which increased the size of routing tables and consequently the time required to deliver packets. Using Shim6 and IPv6 the address prefixes are not required thereby avoiding the performance delays of IPv4 multihoming.

Shim6 works by modifying the network layer in the protocol stack. When two hosts using Shim6 connect they establish a Shim6 context and exchange information including the multiple IPv6 addresses with which they may be reached. During transmission of a packet the packet is received at the network layer in the transmitting host from a higher layer with a destination IP address of the intended recipient host. The Shim6 element in the network layer may substitute a different IP address for the destination host and then communicate the packet up to the transport layer. This substitution may be performed if for example the destination IP address originally indicated in the packet identifies a link to the destination host that is no longer viable. This allows for the new path to be used without breaking current transport layer configurations. In Shim6 the IP addresses revealed to the transport layer are referred to as identifiers while the IP address revealed to the network and data link layers are referred to as locators. The Shim6 element stores mappings between identifiers and locators in order to facilitate path selection.

Shim6 defines a Forced Bidirectional Detection FBD procedure for detecting link failure. FBD is used to determine the viability or reachability of a used IP address pair between two hosts. Reachability is analyzed in terms of reciprocal traffic traffic in one direction creates an expectation of traffic in the return direction. The FBD procedure begins after two nodes have successfully established a Shim6 context. A node which implements FBD uses two timers 1 a send timer to indicate the time since the last packet was sent and 2 a keepalive timer to indicate the time since the last packet was received. These two timers are mutually exclusive so that no more than one timer is running at any time. When a host generates an outgoing data packet within the Shim6 context the send timer is started. If there is a keepalive timer running at the time the keepalive timer is stopped. When the host receives an incoming data packet the send timer is stopped and the keepalive timer is started. If the keepalive timer exceeds a keepalive timeout value a keepalive packet is transmitted to the other host. If the send timer value exceeds a send timeout value the host determines that the other host is unreachable. Using FBD it may take the host tens of seconds to determine if the other host is unreachable.

Host A then starts its send timer and sends a data or keepalive packet . The data or keepalive packet does not reach Host B . The send timer of Host B expires indicating a failure of the link to Host A . The send timer of Host A expires indicating a failure of the link to Host B . At this point both Host A and Host B have determined that the link over which they have been communicating is broken.

Shim6 further defines the Locator Pair Exploration procedure which is used by hosts to explore a viable link when they experience link failure. According to the Locator Pair Exploration procedure the host that first detects a link failure sends probe messages to the other host using different address pairs. The host iterates through address pair combinations until it receives a probe message back. The responding probe message confirms that the initial probe message has reached the other host and that the link is functional in both directions.

Institute of Electrical and Electronics Engineers IEEE 802.21 MIH Media Independent Handover defines a framework for supporting mobility of devices between networks based on heterogeneous link layer layer one and layer two technologies. MIH defines mechanisms for handover and link adaptation in response to changing link conditions and quality of service QoS requirements. MIH specifies an MIH Function MIHF which is an implementation of MIH services and is treated as a logical entity implemented in both MIH devices and in the network.

The protocol stack includes a first link layer component that implements media specific link layer functionality according to a first radio access technology RAT . A second link layer component implements media specific link layer functionality according to a second RAT. As an example the first link layer component may function according to IEEE 802.11 Wireless Local Area Network WLAN standards while the second link layer component may function according to Third Generation Partnership Project 3GPP Evolved Universal Terrestrial Radio Access Network E UTRAN standards.

In MIH exchanges of information between functional entities occur via Service Access Points SAPs . The MIH Users may communicate with the first link layer component via a first Logical Link Control LLC SAP and with the second link layer component via a second LLC SAP . The MIHF and the MIH Users communicate using MIH SAP . The MIHF and the first link layer component communicate via MIH LINK SAP . The MIHF and the second link layer component communicate via MIH LINK SAP . Each MIH LINK SAP may be implemented as a media specific Media Access Control MAC SAP physical layer PHY SAP and or Logical Link Control LLC SAP.

The first link layer component may notify the MIHF of a change in MAC or PHY state via the MIH LINK SAP and the MIHF may subsequently communicate a notification of the event to the MIH Users via the MIH SAP . The MIHF may additionally communicate with remote MIHFs not depicted via a network SAP MIH NET SAP and receive event notifications from the remote MIHFs regarding for example the detection of new access networks and link QoS information.

The purpose of the MIIS is to acquire a global view of available networks to facilitate network selection and handovers. The MIIS provides a mechanism for the exchange of information between MIH devices and MIH capable networks regarding handover candidates. MIIS information may be communicated in both directions on the MIH SAP as well as in both directions on the MIH LINK SAPs .

The MICS allows for the initiation of handover between links. Using the MICS handover commands are received at the MIHF from MIH Users via the MIH SAP . In response to a handover command the MIHF may issue a command to control lower layer entities. For example the MIHF may communicate with the first link layer component and the second link layer component in order to handover the protocol stack from one network to another.

While current technologies such as MIH and Shim6 provide mechanisms for improving the connectivity of networking devices current technologies leave a number of issues unaddressed. Current power saving techniques for single and dual mode wireless devices determine when radio interfaces are turned on and off based on parameters such as link quality and required QoS. However these techniques do not suggest how power saving techniques may implemented in multimode multihoming devices. Additionally current technologies do not suggest how handover should be performed for multimode multihoming devices. For example current technologies do not provide solutions that consider both access network characteristics and multihoming IP path characteristics in making handover decisions. Therefore technologies for power saving and IP link access network mobility in the context of wireless devices with multiple radio interfaces are required.

A wireless transmit receive unit WTRU includes a mobility management function and a multihoming function. The mobility management function may implement the Media Independent Handover MIH protocol and the multihoming function may implement the Shim6 protocol. The mobility management function may communicate link status information to the multihoming function. Based on the link status information the multihoming function may accelerate or decelerate a link failure detection procedure may modify a list of possible paths for consideration for a path exploration procedure and or may determine to initiate a path exploration procedure. The multihoming function may communicate to the mobility management function that additional communications resources are required. In response the mobility management function may activate an inactive radio interface. Subsequent path exploration procedures may include the exploration of paths that may be established over the activated radio interface.

When referred to hereafter the terminology wireless transmit receive unit WTRU includes but is not limited to a user equipment UE a mobile station a fixed or mobile subscriber unit a pager a cellular telephone a personal digital assistant PDA a computer or any other type of user device capable of operating in a wireless environment. When referred to hereafter the terminology link layer component is a component that implements layer one and or layer two functionality according to a Radio Access Technology RAT . When referred to hereafter the terminology base station includes but is not limited to a Node B a site controller an access point AP or any other type of interfacing device capable of operating in a wireless environment.

When referred to hereafter a multihoming function is a module that implements at least some subset of multihoming functionality. Multihoming functionality includes but is not limited to maintaining a single IP address that corresponds to multiple physical interfaces maintaining multiple IP addresses that correspond to multiple IP paths generating and storing IP address pairs that identifying IP paths for multihomed use detecting link quality including failure over multihomed IP links exploration for pairs of IP addresses for multihomed IP links inter domain handover of multihomed IP sessions and translation mapping of IP addresses to deliver payload data over multihomed IP links. A Shim6 implementation is one example of a multihoming function though the principles described herein are not limited to use with Shim6.

When referred to hereafter a mobility management function is a module that implements at least some subset of mobility management functionality. Mobility management functionality includes but is not limited to receiving generating and or storing information relating to available heterogeneous access networks their attributes and or link status over the access networks and providing commands to heterogeneous link layer components to perform handover and or turn radio interfaces on or off. A Media Independent Handover MIH Function MIHF is one example of a mobility management function though the principles described herein are not limited to the use of MIH or the MIHF.

The first MHF modifies the durations of one or more timer parameters used in link failure detection based on the contents of the received link status information. For example the first MHF may modify the durations of keepalive or send timer parameters. The first MHF may modify one or more of the durations by an amount proportional to the confidence that connectivity on the link will be lost. For example if the link status information indicates a low confidence that connectivity will be lost the keepalive timer duration may be set to be half of its previous duration. If the link status information indicates a high confidence that connectivity will be lost the keepalive timer may be stopped or its duration set to zero such that a keepalive message will be sent immediately.

The keepalive timer at the first MHF expires based on the modified duration the send timer is started and the first MHF sends a keepalive packet to the second MHF . The keepalive packet can carry an indication of poor link quality to inform the second MHF about the link quality. The second MHF may modify the timer durations of one or more link failure detection timers such as the keepalive or send timers based on receiving the keepalive packet at a time earlier than expected. Alternatively or additionally the second MHF may modify the timer durations based on link status information received from an MMF not depicted implemented in the second device.

The keepalive timer at the second MHF expires based on the modified duration the send timer is started and the second MHF sends a data or keepalive packet to the first MHF . In response to the data or keepalive packet the first MHF stops its send timer. The first MHF sends a data or keepalive packet and starts its send timer though the data or keepalive packet does not reach the second MHF . The send timer based on a modified duration at the second MHF expires indicating link failure. The send timer based on a modified duration at the first MHF expires indicating link failure. After link failure is detected the first MHF and second MHF may perform a procedure to explore paths and or establish a new link. The procedure to explore paths and or establish a new link may be for example a Locator Pair Exploration procedure.

As described above timer durations may be modified to be shortened where unfavorable link status information is received. Timer durations may alternatively or additionally be modified to be longer when favorable link status information is received from an MMF or when a keepalive timer is received at a time later than expected. Adjusting the duration of a failure detection timer based on link status input from an MMF has the effect of making link failure detection faster or slower depending upon whether the duration is set to be longer or shorter.

The MMF receives link status information and communicates the link status information to the first MHF . The link status information may indicate for example the discovery of new links the destruction of links and or additional information such as link quality QoS and link data rates. The first MHF may maintain information relating to potential link candidates. The link candidate information may be stored in a list set or any other appropriate data structure. By way of example the first MHF may store information indicating three IP addresses IP A IP B and IP C with which it may potentially communicate with the second device that includes the second MHF . If the first MHF receives link status information indicating that the link corresponding to IP A is down then the first MHF may modify its link candidate information to reflect that IP A should not be considered a candidate for path exploration link establishment. If the first MHF receives link status information indicating that the link corresponding to IP B has poor quality then the first MHF would consider IP B a less desirable candidate for path exploration link establishment and would downgrade the desirability of IP B as a candidate. If the first MHF maintains an ordered list of candidates the first MHF may re order the list such that other candidates with more favorable corresponding link quality information are selected before IP B is selected.

The first MHF and second MHF perform a path exploration link establishment procedure based on the modified candidate information. The procedure to explore paths and or establish a new link may be for example a Locator Pair Exploration procedure. Based on the above example involving IP A IP B and IP C the first MHF may perform the path exploration link establishment procedure by sending a first probe request to the second MHF via IP C. Only if path exploration using IP C proved unsuccessful would the first MHF attempt to explore a path using IP B. The first MHF would not attempt to send a probe request using IP A because IP A was removed from the list of potential candidates based on the link status information.

The first MHF may additionally trigger a path exploration link establishment procedure based on the received link status information. For example link status information may indicate that a link considered currently active is down. Based on the link status information the first MHF may make a determination to immediately abandon the current link and establish a new link. Whereas the first MHF may ordinarily wait until the completion of a link failure detection procedure before searching for a new link the first MHF may in this instance halt or ignore any failure detection procedures currently in progress in order to immediately begin working towards establishing a new link.

The first MHF may also determine to initiate a path exploration link establishment procedure in response to receiving link status information that indicates that a new link has been detected or that a previously discovered link is available for use. This determination may additionally be based on previously received link status information such as for example information indicating a poor current link status.

The WTRU includes a first link layer component which implements link layer functionality according to a first RAT. The first link layer component may communicate with a first radio access network which operates according to the first RAT. A second link layer component implements link layer functionality according to a second RAT and may communicate with second radio access network which operates according to the second RAT. A third link layer component implements link layer functionality according to a third RAT and may communicate with a third radio access network which operates according to the third RAT. The MMF communicates with the link layer components via interfaces . The interfaces may be media dependent interfaces and may be for example MIH LINK SAP interfaces. Each of the RATs supported by the link layer link layer components may be different. The WTRU may also include additional link layer link layer components not depicted .

The first MHF in the WTRU maintains a first IP address IP A second IP address IP B and third IP address IP C for the WTRU . The first MHF may establish IP links over IP paths from each of the IP addresses through corresponding link layer link layer components and radio access networks .

The WTRU is in communication with Host B through active IP link which connects the WTRU and Host B via the Internet . Host B may be a WTRU or a non wireless networking device. Host B includes a second MHF . The second MHF maintains a fourth IP address IP D and a fifth IP address IP E for Host B . From the perspective of the first MHF in the WTRU the active IP link would be characterized as IP C IP E while the active IP link would be characterized by the second MHF in Host B as IP E IP C .

The four RAT stacks communicate with four corresponding RAT drivers in the WTRU . The RAT drivers communicate with corresponding RAT interfaces in the MMF . The RAT interfaces communicate with the mobility policy module in the MMF . The mobility policy module communicates with the network connection controller module and the user interface module in the WTRU . The mobility policy module additionally communicates with a number of interfaces to higher layers including the Voice Call Continuity VCC interface the Session Initiation Protocol SIP interface the transport layer interface the Mobile IP MIP interface and the multihoming interface . The mobility policy module may also communicate with additional higher layer interfaces not depicted .

Upper layer link layer component includes a number of modules for implementing upper layer layer three and above functionality. VCC client module communicates with the VCC interface in the MMF as well as to the SIP module . The SIP module additionally communicates with the SIP interface and the transport layer module . Transport layer module may implement transport layer protocols such as Transmission Control Protocol TCP User Datagram Protocol UDP Stream Control Transmission Protocol SCTP Datagram Congestion Control Protocol DCCP and or other transport layer protocols. Transport layer module communicates with transport layer interface as well as MIP module IP module and MHF . MIP module implements MIP and communicates with MIP interface . MHF may be separately connected to IP module or may be implemented in conjunction with IP module . MHF communicates with multihoming interface . Multihoming interface functions as an adaptation layer. It converts and transfers information between the mobility policy module and the MHF . The multihoming interface receives link layer information from all of the RAT stacks that are in communication with the MMF .

Multihoming interface may be implemented differently according to the technologies and protocols used at the MHF and MMF . The communication of messages between the multihoming interface and the MHF may be implemented as a language specific or language independent Application Programming Interface API or other protocol. Table 1 and Table 2 show an example API describing communications between an MMF that implements MIH functionality and an MHF that implements Shim6 functionality.

The Message Received At MMF column of Table 1 indicates MIH messages that may be received at an MMF and provided to the multihoming interface . The multihoming interface receives an MIH message generates the corresponding message in the Message Sent From MMF To MHF column and communicates the generated message to the MMF . MIH messages may be received by the MMF at a SAP such as an MIH LINK SAP MIH NET SAP or MIH SAP or via a different interface.

In response to a Shim6 Link Going Down message the MHF analyzes if the message relates the current active link. If so the MHF may adjust timer parameters to speed up triggering of the Locator Pair Exploration procedure sooner. If the message indicates a high confidence that the link is going down the MHF may stop the keepalive timer and send a keepalive message immediately. If the message indicates a low confidence that the link is going down the MHF may reduce the keepalive timer to half of its value. If the link described in the message is not the current active link the MHF removes the link from consideration for the Locator Pair Exploration. In response to a Shim6 Link Down message the MHF immediately begins the Locator Pair Exploration procedure. In response to a Shim6 Link Detected message the MHF adds the new link as a high priority candidate for the Locator Pair Exploration procedure. If the currently active link is experiencing problems the MHF may immediately attempt to establish a new IP link. To determine if the currently active link is experiencing problems the MHF may analyze one or more QoS parameters and or compare one or more QoS parameters to a threshold. In response to a Shim6 Link Up message the MHF begins the Locator Pair Exploration procedure. A Shim6 Register message is not generated in response to an MIH message but is generated when the MMF activates in order to establish communications between the MMF and the MHF . This Shim6 Register messages provides information required by the MHF to establish communications with the MMF . In response to the Shim6 Register message the MHF may call a callback function at the MMF .

Table 2 shows messages that may be sent from the MHF to the multihoming interface according to the example API.

The Event At MHF column describes events that occur at the MHF . In response to the events the MHF generates the corresponding message in the Message Sent From MHF To MMF column and communicates the generated message to the multihoming interface .

The MHF may communicate a Shim6 LinkUpReq message based on a determination that additional communications resources such as a new IP address and or new radio interface are required for the purpose of increasing available bandwidth. In response to the Shim6 LinkUpReq message the MMF may select and turn on an inactive radio interface. Alternatively or additionally the MMF may initiate the allocation of a new IP address for the WTRU . The MMF may communicate with lower layer link layer components in order to active additional radio interfaces by using for example a media dependent MIH LINK SAP interface. The MMF may use for example an MIH Link Action.request message to activate an inactive radio interface. When the MHF has determined to deregister from the MMF or when an error has occurred in the MMF the MHF may communicate a Shim6 Unregister message to the multihoming interface . In response to the Shim6 Unregister message the MMF removes any entries or other data corresponding to the MHF terminating communications between the MMF and the MHF .

The WTRU includes a processor in communication with a first transmitter first receiver and first antenna . The first transmitter first receiver and first antenna are configurable to implement the first RAT. The processor is also in communication with a second transmitter second receiver and second antenna . The second transmitter second receiver and second antenna are configurable to implement the second RAT. The processor is configurable to generate encode and decode messages and signals as described above with reference to and is configurable to operate and or direct a multihoming function not depicted and a mobility management function not depicted to implement functionality as described above with reference to . The transmitters and receivers are configurable to send and receive respectively messages and signals as described above with reference to . The first transmitter and first receiver may be implemented as a transceiver and or the second transmitter and second receiver may be implemented as a transceiver. The WTRU may also include additional transceivers not depicted and or transmitter receiver pairs not depicted in communication with the processor capable of communicating according to additional diverse RATs. Alternatively or additionally the WTRU may include one or more transceivers not depicted in communication with the processor each of the one or more transceivers capable of communicating using more than one RAT per transceiver.

The first base station includes a processor in communication with a transmitter receiver and antenna . The second base station includes a processor in communication with a transmitter receiver and antenna . The processors are configurable to generate encode and decode messages and signals as described above with reference to . The transmitters and receivers are configurable to send and receive respectively messages and signals as described above with reference to . The first base station and or second base station may include a remote MIHF not depicted . Alternatively or additionally the first base station and or second base station may communicate data between the WTRU and a remote MIHF implemented in a network node in a core network to which the first base station and or second base station is connected.

RATs which may be implemented in the WTRU and base stations include but are not limited to technologies such as Institute of Electrical and Electronics Engineers IEEE Wireless Local Area Network WLAN 802.11x Code Division Multiple Access 2000 CDMA2000 Universal Mobile Telecommunications System UMTS UMTS Radio Access Network UTRAN Wideband Code Division Multiple Access WCDMA Worldwide Interoperability for Microwave Access WiMAX Global System for Mobile Communications GSM GSM Enhanced Data Rates For GSM Evolution EDGE Radio Access Network GERAN Wireless Broadband WiBro Long Term Evolution LTE Evolved UTRAN EUTRAN and LTE Advanced.

Although features and elements are described above in particular combinations each feature or element as described above with reference to can be used alone without the other features and elements or in various combinations with or without other features and elements. The sub elements of the methods and features described above with reference to may be performed in any arbitrary order including concurrently in any combination or sub combination. The features and elements described above with reference to may be implemented in a computer program software or firmware incorporated in a computer readable storage medium for execution by a general purpose computer a specific purpose computing or data processing device and or one or more processors. Suitable computer readable storage media include but are not limited to a register a cache memory a read only memory ROM a semiconductor memory device such as a Dynamic Random Access Memory D RAM Static RAM S RAM or other RAM a magnetic medium such as a flash memory a hard disk a magneto optical medium an optical medium such as a CD ROM a digital versatile disk DVDs or Blu Ray disc BD other volatile or non volatile memory. Suitable processors include but are not limited to a single or multi core general purpose processor a special purpose processor a conventional processor a digital signal processor DSP a plurality of microprocessors one or more microprocessors in association with a DSP core a controller a microcontroller one or more Application Specific Integrated Circuits ASICs one or more Field Programmable Gate Array FPGA circuits an integrated circuit IC a system on a chip SOC and a state machine.

The multihoming functions and mobility management functions described above with references to may be implemented as one or more software modules one or more processors or as combinations thereof. Suitable software modules include by way of example an executable program a function a method call a procedure a routine or sub routine one or more processor executable instructions a script or macro an object or a data structure.

A processor in association with software may be used to implement a radio frequency transceiver for use in a wireless transmit receive unit WTRU user equipment UE terminal base station radio network controller RNC or any host computer. The WTRU may be used in conjunction with modules implemented in hardware and or software such as a camera a video camera module a videophone a speakerphone a vibration device a speaker a microphone a television transceiver a hands free headset a keyboard a Bluetooth module a frequency modulated FM radio unit a liquid crystal display LCD display unit an organic light emitting diode OLED display unit a digital music player a media player a video game player module an Internet browser and or any wireless local area network WLAN or Ultra Wide Band UWB module.

