---

title: Data control unit
abstract: A data control unit includes a primary power supply line to which a primary power supply voltage is supplied; a secondary power source line to which a secondary power supply voltage is supplied; a voltage converter for converting the primary power supply voltage into the secondary power supply voltage; a voltage level detection unit which is connected to the primary power source line, and outputs a voltage level detection signal; a reset signal generator which is connected to the secondary power source line, and outputs a reset signal; and a control signal generation unit which receives the voltage level detection signal and the reset signal, and outputs a control signal. The data control unit detects power supply cutoff, and secures the time for sufficient backup process.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08140880&OS=08140880&RS=08140880
owner: Rohm Co., Ltd.
number: 08140880
owner_city: Kyoto-fu
owner_country: JP
publication_date: 20090212
---
This application is based upon and claims the benefit of priority from prior Japanese Patent Applications No. P2008 33721 filed on Feb. 14 2008 the entire contents of which are incorporated herein by reference.

The present invention relates to a data control unit. In particular the present invention relates to a data control unit which can detect power supply cutoff and can secure time for sufficient backup process.

Generally since data currently treated in an electronic circuit disappears with a stop of the current supply resulting from a power failure battery deterioration etc. even if it turns ON a power supply again it cannot resume a process. As a method of solving this there is a method for backing up stored data to a nonvolatile storage and holding data when the power supply cutoff is detected. A data hold device and data holding method using a nonvolatile storage device are already disclosed for example refer to Patent Literature 1 .

In the above mentioned method a control device which detects power supply cutoff turn on and outputs a signal for request for backup recovering of data is used toward a controlled system device having a function for performing fixation of the data. Since these control devices process after the power supply cutoff detection it is necessary to secure another power supply. However using a battery causes cost increase. In order to solve this problem DATA RESTORING METHOD is proposed as the method of processing by utilizing discharging time of a capacitor for example refer to Patent Literature 2 .

On the other hand PROGRAMMABLE CONTROLLER AND DISPOSAL METHOD AT THE TIME OF POWER OFF FOR THE SAME for monitoring the power supply lines of two systems for example AC 100V side and DC 5V side etc. is already disclosed for example refer to Patent Literature 3 . However the method disclosed in the Patent Literature 3 does not set up power source monitor time and is targeted for only at the time of a stop of the device.

When utilizing the discharging time of a capacitor and performing the process after power supply cutoff it is useful from the view point of cost to secure needed processing time using the capacitor of small capacity as much as possible. However in the above mentioned method it is necessary to enlarge capacity of a capacitor in order to secure processing time.

When utilizing the discharging time of a capacitor and performing the process after power supply cutoff since it is necessary to detect power supply cutoff in the range in which the system can operate it is necessary to set up the voltage level to detect more highly. Usually for example in the power supply of 3.3V when about 3.1V is detected it is set to regarding as the power supply cutoff etc.

In this case when the value of power supply voltage is varied by a noise on a power supply line etc. a possibility of being regarded as the power supply cutoff is high a useless backup process occurs as a result and normal operation is prevented.

The purpose of the invention is to provide a data control unit which can secure the period for sufficient backup process which can be processed when detecting the power supply cutoff turn on and outputting the signal for requesting a backup data restoring recovery of data.

According to an aspect of the invention a data control unit comprises a controlled target circuit which has a nonvolatile storage element and performs a predetermined operation a power supply voltage converter for converting a primary power supply voltage into a secondary power supply voltage and a detection control unit for detecting variation of a potential of each of the primary power supply voltage and the secondary power supply voltage and outputting a control signal which transfers data in the controlled target circuit to the nonvolatile storage element toward the controlled target circuit.

According to another aspect of the invention a data control unit comprises a voltage level detection unit for monitoring a voltage level of a power supply and a control signal generation unit for outputting a control signal for requesting backup of data of a controlled target circuit in the voltage level detection unit when a voltage level of cutoff turn on of the power supply is detected.

According to another aspect of the invention a data control unit comprises a nonvolatile CPU including a nonvolatile storage element a power supply voltage converter for converting a primary power supply voltage into a secondary power supply voltage a voltage level detection unit which the primary power supply voltage is inputted and outputs a voltage detection signal a reset signal generation unit which the secondary power supply voltage is inputted and outputs a reset signal a control signal generation unit which the voltage detection signal and the reset signal are inputted and outputs a control signal and a clock enable signal to the nonvolatile CPU a clock generation device for outputting a clock signal and a logic unit for generating an output signal for operating the nonvolatile CPU based on the clock enable signal and the clock signal.

According to another aspect of the invention a data control unit comprises a primary power supply line to which a primary power supply voltage is supplied a secondary power source line in which a secondary power supply voltage is supplied a voltage converter which is placed between the primary power supply line and the secondary power source line and converts the primary power supply voltage into the secondary power supply voltage a voltage level detection unit which is connected to the primary power supply line and outputs a voltage level detection signal a reset signal generation unit which is connected to the secondary power source line and outputs a reset signal and a control signal generation unit which receives the voltage level detection signal and the reset signal and outputs a control signal.

According to the data control unit of the present invention when applying to the controlled system which has a power source line of two systems the capacity of the capacitor for performing the voltage securing after the power supply cutoff can be applied small.

Moreover according to the data control unit according to the present invention when the value of the power supply voltage is varied by the noise on the power source line etc. a useless backup process data restoring recovery can be suppressed.

Various embodiments of the present invention will be described with reference to the accompanying drawings. It is to be noted that the same or similar reference numerals are applied to the same or similar parts and elements throughout the drawings and the description of the same or similar parts and elements will be omitted or simplified. Generally and as is conventional in the representation of the circuit blocks it will be appreciated that the various drawings are not drawn to scale from one figure to another nor inside a given figure and in particular that the circuit diagrams are arbitrarily drawn for facilitating the reading of the drawings. In the following descriptions numerous specific details are set forth such as specific signal values etc. to provide a thorough understanding of the present invention. However it will be obvious to those skilled in the art that the present invention may be practiced without such specific details. In other instances circuits well known have been shown in block diagram form in order to not obscure the present invention with unnecessary detail.

The embodiments shown below exemplify an apparatus and a method that are used to implement the technical ideas according to the present invention and do not limit the technical ideas according to the present invention to those that appear below. These technical ideas according to the present invention may receive a variety of modifications that fall within the claims.

As shown in a theoretic block configuration of a data control unit according to a first embodiment of the present invention includes a primary power supply line VDL to which a primary power supply voltage VDD is supplied a secondary power supply line VDL to which a secondary power supply voltage VDD is supplied a power supply voltage converter which is placed between the primary power supply line VDL and the secondary power supply line VDL and converts the primary power supply voltage VDD into the secondary power supply voltage VDD and a detection control unit placed between the primary power supply line VDL and the secondary power supply line VDL. As shown in a controlled target circuit connected to the secondary power supply line VDL is connected also to the primary power supply line VDL through the detection control unit .

At this point in the case of the data control unit which uses the power supply of two systems which composes the primary power supply voltage VDD and the secondary power supply voltage VDD it is assumed that the controlled target circuit which uses the power supply of the system of the secondary power supply voltage VDD can be operated within the limits of the secondary power supply voltage VDD 10 VDD.

A period from the time point of the primary power supply voltage VDD becoming the VDD detecting voltage level V and being considered that the primary power supply voltage VDD is the power supply OFF to the time point of the secondary power supply voltage VDD becoming the VDD detecting voltage level V and the controlled target circuit is turned to the not ready state is a period TW which can process backup such as data restoring recovery of the controlled target circuit after detection of the power supply cutoff.

According to the data control unit according to the first embodiment of the present invention it becomes possible to detect the power supply cutoff before secondary power supply voltage VDD of the secondary power supply line VDL drops by monitoring that the primary power supply voltage VDD VDD

On the other hand as shown in a schematic block configuration of a data control unit according to the comparative example of the first embodiment of the present invention includes a primary power supply line VDL to which a primary power supply voltage VDD is supplied a secondary power supply line VDL to which a secondary power supply voltage VDD is supplied and a power supply voltage converter which is placed between the primary power supply line VDL and the secondary power supply line VDL and converts the primary power supply voltage VDD into the secondary power supply voltage VDD. As shown in a controlled target circuit connected to the secondary power supply line VDL is not connected to the primary power supply line VDL.

A period from the time point of secondary power supply voltage VDD becoming the VDD detecting voltage level V 95 VDD and being considered that it is the power supply OFF to the time point secondary power supply voltage VDD becoming the VDD detecting voltage level V 90 VDD and the controlled target circuit being turned to the not ready state is a period TW which can process backup such as data restoring recovery of the controlled target circuit after the detection of power supply cutoff.

As shown in the operation of the data control unit according to the comparative example monitors only the secondary power supply voltage VDD of the secondary power supply line VDL to which the controlled target circuit is connected and then detects the power supply cutoff. That is since the power supply cutoff is detected after the secondary power supply voltage VDD drops the time TW in which the process is possible after the power supply cutoff detection is short.

When monitoring the voltage level of the primary power supply voltage VDD of another system and detecting the power supply cutoff the voltage level to detect can be set up low as compared with the case where monitor only secondary power supply voltage VDD and the power supply cutoff is detected.

When the primary power supply voltage VDD of another system is monitored it is considered that the primary power supply voltage VDD is the power supply OFF and the detection level is 90 of normal operation voltage VDD by detecting the primary power supply voltage VDD is power supply cutoff power supply OFF as compared with the VDD detecting voltage level V level 90 VDD as mentioned above.

On the other hand when monitoring the secondary power supply voltage VDD of the secondary power supply line VDL as shown in the detection level is 95 of the normal operation voltage VDD .

Therefore as for the data control unit according to the first embodiment of the present invention the probability which can absorb fluctuation of the power supply becomes high compared with the comparative example.

As a detailed schematic block configuration is shown in the data control unit according to the first embodiment of the present invention includes a primary power supply line VDL to which a primary power supply voltage VDD is supplied a secondary power supply line VDL to which a secondary power supply voltage VDD is supplied a power supply voltage converter which is placed between the primary power supply line VDL and the secondary power supply line VDL and converts the primary power supply voltage VDD into the secondary power supply voltage VDD a voltage level detection unit which is connected to the primary power supply line VDL and outputs a voltage level detection signal VDT a reset signal generation unit which is connected to the secondary power supply line VDL and outputs a reset signal RSTn and a control signal generation unit which receives the voltage level detection signal VDT from the voltage level detection unit receives the reset signal RSTn from the reset signal generation unit and outputs a control signal CLS.

As shown in a controlled target circuit is connected to the secondary power supply line VDL and the controlled target circuit receives the reset signal RSTn from the reset signal generation unit in the data control unit and receives the control signal CLS from the control signal generation unit in the data control unit .

Moreover in capacitors C and C are parasitism capacitors which the primary power supply line VDL and the secondary power supply line VDL have respectively.

When the value of the primary power supply voltage VDD further drops and the value of the secondary power supply voltage VDD becomes lower than the reset voltage level V the reset signal RSTn is turned to the ON state.

Further when the primary power supply voltage VDD rises and the value of secondary power supply voltage VDD becomes higher than reset voltage level V the reset signal RSTn is turned to the OFF state.

Further when the primary power supply voltage VDD rises and becomes higher than the VDD detection voltage level V as for the reset signal RSTn the OFF state is held and the voltage level detection signal VDT is turned to the ON state.

According to the data control unit according to the first embodiment of the present invention when applying to the controlled target circuit system which has the power source lines of two systems since the time constant by the capacitor which the power source line has is not used the capacity of the capacitor for performing voltage securing after the power supply cutoff can be applied small.

Moreover according to the data control unit according to the first embodiment of the present invention when the value of the power supply voltage is varied by the noise on the power source line etc. a useless backup process data restoring recovery can be suppressed.

As shown in a data control unit which is a data control unit according to the second embodiment of the present invention and performs a data restoring recovery control operation includes a primary power supply line VDL to which a primary power supply voltage VDD is supplied a secondary power source line VDL to which a secondary power supply voltage VDD is supplied a power supply voltage converter which is placed between the primary power source line VDL and the secondary power source line VDL and converts the primary power supply voltage VDD into the secondary power supply voltage VDD a voltage level detection unit which is connected to the primary power source line VDL and outputs a voltage level detection signal VDT a reset signal generator which is connected to the secondary power source line VDL and outputs a reset signal RSTn and a control signal generation unit which receives the voltage level detection signal VDT from the voltage level detection unit receives reset signal RSTn from the reset signal generation unit and outputs a data restoring control signal DRCS and a data recovery control signal DSCS.

As shown in a controlled target circuit is connected to the secondary power source line VDL. The controlled target circuit receives the reset signal RSTn from the reset signal generation unit in the data control unit and receives the data restoring control signal DRCS and the data recovery control signal DSCS from the control signal generation unit .

The controlled target circuit includes a main operational unit a nonvolatile storage element and a data interface control unit between the main operational unit and the nonvolatile storage element as shown in .

As shown in the main operational unit the data interface control unit and the nonvolatile storage element in the controlled target circuit receive the reset signal RSTn from the reset signal generation unit in the data control unit and the data interface control unit receives the data restoring control signal DRCS and the data recovery control signal DSCS from the control signal generation unit .

Moreover in capacitors C and C are parasitism capacitors which the primary power source line VDL and secondary power source line VDL have respectively.

An operating sequence of the data control unit according to the second embodiment of the present invention will be explained using the state transition diagram showing in .

A reset state S indicates the state where the data control unit is held while being a reset state and is not operating.

A power recovery waiting state S indicates the state where the primary power supply voltage VDD is standing by until becoming certain specific threshold voltage Vth for example the VDD detecting voltage level V .

A data recovery signal output state S indicates the state where the data recovery control signal DSCS toward the controlled target circuit is sent from the data control unit and data is recovered from the nonvolatile storage element in the controlled target circuit .

A power source monitor state S indicates the state where it is checking and monitoring whether or not the primary power supply voltage VDD is a level which is less than specific threshold voltage Vth for example the VDD detecting voltage level V .

A data restoring signal output state S indicates the state where the data restoring control signal DRCS is sent toward the controlled target circuit from the data control unit and data is restored to the nonvolatile storage element in the controlled target circuit .

Further when the value of the primary power supply voltage VDD drops and the value of the secondary power supply voltage VDD becomes lower than the reset voltage level V the reset signal RSTn is turned to the ON state.

Furthermore when the primary power supply voltage VDD rises and the secondary power supply voltage VDD becomes higher than the reset voltage level V the reset signal RSTn turned to the OFF state.

Furthermore when the primary power supply voltage VDD rises and becomes higher than the VDD detection voltage level V as for the reset signal RSTn the OFF state is held and the voltage level detection signal VDT is turned to the ON state.

At the time of power recovery the power recovery state is detected by monitoring the voltage level of the primary power supply voltage VDD and detecting that the primary power supply voltage VDD became VDD V as compared with the VDD detecting voltage level V. As a result the data recovery control signal DSCS is outputted to the data interface control unit of the controlled target circuit from the data control unit . In the above mentioned case the power source monitor of the secondary power supply voltage VDD is applied only to the reset signal generation unit of the data control unit with which the power supply is supplied from the secondary power supply voltage VDD.

According to the data control unit according to the second embodiment of the present invention when detecting power supply cutoff turn on and outputting the signal for requesting backup data restoring recovery of data the period for sufficient the backup process which can be processed can be secured.

According to the data control unit according to the second embodiment of the present invention when applying to the controlled target circuit system which has the power source line of two system since the time constant by the capacitor which the power source line has is not used the capacity of the capacitor for performing voltage securing after the power supply cutoff can be applied small.

Moreover according to the data control unit according to the second embodiment of the present invention when the value of the power supply voltage is varied by the noise on the power source line etc. a useless backup process data restoring recovery can be suppressed.

As shown in a data control unit which is a data control unit according to a third embodiment of the present invention and applies a nonvolatile CPU as controlled target includes a primary power supply line VDL to which a primary power supply voltage VDD is supplied a secondary power source line VDL to which a secondary power supply voltage VDD is supplied a power supply voltage converter which is placed between the primary power source line VDL and the secondary power source line VDL and converts the primary power supply voltage VDD into the secondary power supply voltage VDD a voltage level detection unit which is connected to the primary power source line VDL and outputs a voltage level detection signal VDT a reset signal generation unit which is connected to the secondary power source line VDL and outputs a reset signal RSTn and a control signal generation unit which receives the voltage level detection signal VDT from the voltage level detection unit and receives the reset signal RSTn from the reset signal generation unit .

The control signal generation unit outputs a ferroelectric element write signal E a normal operation signal E a ferroelectric element both ends short circuit signal FRST and ferroelectric element driving signals PL and PL toward the nonvolatile CPU . Moreover a clock enable signal CLKEN outputted from the control signal generation unit and an output signal from a clock generation device are inputted into an AND gate and an output signal of the AND gate is inputted into the nonvolatile CPU .

As shown in the nonvolatile CPU is connected to the secondary power source line VDL and receives the reset signal RSTn from the reset signal generation unit in the data control unit and receives the ferroelectric element write signal E the normal operation signal E the ferroelectric element both ends short circuit signal FRST and the ferroelectric element driving signals PL and PL from the control signal generation unit . Moreover the nonvolatile CPU receives the clock signal CLK through the AND gate .

Moreover in capacitors C and C are parasitism capacitors which the primary power source line VDL and the secondary power source line VDL have respectively.

Through a program data input output line a program data input terminal is connected to the instruction processing unit and a program data output terminal is connected to the switch block .

Moreover as shown in a control signal input terminal and a control signal output terminal are connected to the nonvolatile CPU through a control signal input output line .

Moreover as shown in the clock signal CLK is supplied to the nonvolatile CPU through a clock control terminal and the ferroelectric element write signal E the normal operation signal E the ferroelectric element driving signals PL and PL and the ferroelectric element both ends short circuit signal FRST are supplied the nonvolatile CPU through a nonvolatile operation control terminal connected to a nonvolatile operation control line .

Moreover as shown in the instruction processing unit includes a logic circuit block which has a nonvolatile memory gate the calculated result storage unit includes a logic circuit block which has a nonvolatile memory gate and the arithmetic processing unit includes a logic circuit block which has a nonvolatile memory gate .

As shown in the first nonvolatile storage element NVSE includes MOS transistors Qand Qand ferroelectric capacitors and and the second nonvolatile storage element NVSE includes MOS transistors Qand Qand ferroelectric capacitors and

As shown in the volatile storage element VSE includes inverters and pass switches and and multiplexers and .

As shown in the first data interface control unit includes an inverter and a pass switch and the second data interface control unit includes an inverter and a pass switch .

An input terminal of the inverter is connected to a voltage applied terminal of the data input signal D. An output terminal of the inverter is connected to an input terminal of the inverter . An output terminal of the inverter is connected to a first input terminal of the multiplexer through the pass switch . Furthermore the output terminal of the inverter is connected to an input terminal of the inverter and an output terminal of the inverter is connected to the input terminal of the inverter through the pass switch .

An output terminal of the multiplexer is connected to an input terminal of the inverter . An output terminal of the inverter is connected to an input terminal of the inverter . An output terminal of the inverter is connected to a pulling out terminal of the data output signal Q. A first input terminal of the multiplexer is connected to the output terminal of the inverter . An output terminal of the multiplexer is connected to an input terminal of the inverter . An output terminal of the inverter is connected to the first input terminal of the multiplexer through the pass switch .

Thus as shown in the nonvolatile memory gate includes the volatile storage element VSE which has a loop structure unit LOOP a part surrounded by and in holding the inputted data input signal D using two logical gates the inverters and in connected to loop shape.

An input terminal of the inverter is connected to the first input terminal of the multiplexer . An output terminal of the inverter is connected to a second input terminal of the multiplexer through the pass switch . An input terminal of the inverter is connected to the first input terminal of the multiplexer . An output terminal of the inverter is connected to a second input terminal of the multiplexer through the pass switch .

A positive electrode terminal of the ferroelectric capacitor is connected to a first plate line and the ferroelectric element driving signal PL is supplied. A negative electrode terminal of the ferroelectric capacitor is connected to a second input terminal of the multiplexer . A MOS transistor Qis connected between the both terminals of the ferroelectric capacitor . A gate of the MOS transistor Qis connected to a voltage applied terminal of the ferroelectric element both ends short circuit signal FRST.

A positive electrode terminal of the ferroelectric capacitor is connected to the second input terminal of the multiplexer . A negative electrode terminal of the ferroelectric capacitor is connected to a second plate line and the ferroelectric element driving signal PL is supplied. A MOS transistor Qis connected between the both terminals of the ferroelectric capacitor . A gate of the MOS transistor Qis connected to the voltage applied terminal of the ferroelectric element both ends short circuit signal FRST.

A positive electrode terminal of the ferroelectric capacitor is connected to a first plate line and the ferroelectric element driving signal PL is supplied. A negative electrode terminal of the ferroelectric capacitor is connected to a second input terminal of the multiplexer . A MOS transistor Qis connected between the both terminals of the ferroelectric capacitor . A gate of the MOS transistor Qis connected to the voltage applied terminal of the ferroelectric element both ends short circuit signal FRST.

A positive electrode terminal of the ferroelectric capacitor is connected to a second input terminal of the multiplexer . A negative electrode terminal of the ferroelectric capacitor is connected to a second plate line and the ferroelectric element driving signal PL is supplied. A MOS transistor Qis connected between the both terminals of the ferroelectric capacitor . A gate of the MOS transistor Qis connected to the voltage applied terminal of the ferroelectric element both ends short circuit signal FRST.

In addition the pass switches and are turned ON OFF according to the clock signal CLK and the pass switch is turned ON OFF according to inverted clock signal CLKB logic inverted signal of the clock signal CLK among the above mentioned components. That is the pass switches and and the pass switch of each other are turned ON OFF exclusively complementary . On the other hand both the pass switches and are turned ON OFF according to the ferroelectric element write signal E. As for both the multiplexers and the signal path is switched according to the normal operation signal E.

Although the drivers for data write inverters and and the multiplexers and are newly needed in the configuration example of the nonvolatile memory gate shown in since the occupation area of the nonvolatile memory gate in the instruction processing unit of the nonvolatile CPU the arithmetic processing unit and the calculated result storage unit is only several percent there is almost no influence of the increase in size given to whole of the nonvolatile CPU .

An operation timing chart at the time of control of the nonvolatile CPU which is an operation waveform of the data control unit according to the third embodiment of the present invention is expressed as shown in . In the power supply variation waveforms of the primary power supply voltage VDD and the secondary power supply voltage VDD are shown. Corresponding to these power supply variation waveforms the reset signal RSTn the voltage level detection signal VDT the clock signal CLK the clock enable signal CLKEN the ferroelectric element write signal E the normal operation signal E the ferroelectric element both ends short circuit signal FRST the ferroelectric element driving signals PL and PL the volatile data signal VSEDATA and the nonvolatile data signal NVSEDATA are shown.

In the following description as shown in the voltage which appears in the connection node of the ferroelectric capacitors and is set to V the voltage which appears in the connection node of the ferroelectric capacitors and is set to V the voltage which appears in the input terminal of the inverter is set to V the voltage which appears in the output terminal of the inverter is set to V the voltage which appears in the input terminal of the inverter is set to V and the voltage which appears in the output terminal of the inverter is set to V.

The nonvolatile CPU is in a normal operation state. Since the ferroelectric element both ends short circuit signal FRST is set to H high level the MOS transistors Q QQ and Qare turned ON and between each both terminals of the ferroelectric capacitors and is short circuited it is in the state where no voltage is applied to these ferroelectric capacitors and . In addition the ferroelectric element driving signals PL and PL applied to the first plate line and the second plate line are all set to L low level .

Moreover till the point in time W since the ferroelectric element write signal E is set to L and the pass switch and the pass switch are turned OFF each driver for data write inverters and in the example of is invalid.

Moreover till the point in time W since the normal operation signal E is set to H and the first input terminal of the multiplexer and the multiplexer is selected the normal loop is formed in the loop structure unit LOOP the part surrounded by and in .

In the volatile storage element when the clock signal CLK is high level the inverter is turned OFF the pass switch is turned ON the pass switch is turned ON and the pass switch is turned OFF. Therefore in the loop composed of the inverter and the inverter when the clock signal CLK changes from the low level to the high level the imported data input signal D is held. And in the loop structure unit the data is passed in that condition and the data output signal Q is outputted from the volatile storage element .

On the other hand when the clock signal CLK is the low level in the loop structure unit the data input signal D imported when the clock signal CLK changed from the high level to the low level is held and the data output signal Q is outputted.

The clock signal CLK is set to L and the inverted clock signal CLKB is set to H . Therefore the pass switch is turned OFF and the pass switch is turned ON.

In particular in the period of the time points W to W shown by the time t to the time t a data write operation from the volatile storage element VSE to the nonvolatile storage elements NVSE and is executed. This data write operation is indicated by the arrow A from the volatile data signal VSEDATA to the nonvolatile data signal NVSEDATA.

Moreover in the time points W to W the ferroelectric element both ends short circuit signal FRST is set to L the MOS transistors Q Q Q and Qare turned OFF and it is in the state in which the voltage impression toward the ferroelectric capacitors and is possible.

Moreover in the time points W to W the ferroelectric element write signal E is set to H and the pass switch and the pass switch are turned ON. Therefore each driver for data write inverters and in the example of is validated.

In addition in the time points W to W since the normal operation signal E is set to H and the first input terminal of the multiplexer and the multiplexer is selected similarly till then the normal loop is formed in the loop structure unit LOOP a part surrounded by and in .

Moreover in the time points W to W the ferroelectric element driving signal PL applied to the first plate line and the ferroelectric element driving signal PL applied to the second plate line are set to L and the ferroelectric element driving signals PL and PL is set to H . That is the same pulse voltage is applied toward the first plate line and the second plate line. The residual polarization state inside the ferroelectric capacitor is set to either the inverted state non inverted state by impression of such the pulse voltage.

More specifically based on the example of at the time W since the output signal Q is H the node voltage V is set to L and the node voltage V is set to H . Therefore in the time points W to W while the ferroelectric element driving signal PL applied to the first plate line and the ferroelectric element driving signal PL applied to the second plate line are set to L it is in the state where the voltage is not applied between the both terminals of the ferroelectric capacitors and is in the state where the voltage of negative polarity is applied between the both terminals of the ferroelectric capacitor and is in the state where the voltage of positive polarity is applied between the both terminals of the ferroelectric capacitor

On the other hand in the time points W to W while the ferroelectric element driving signal PL applied to the first plate line and the ferroelectric element driving signal PL applied to the second plate line are set to H it is in the state where the voltage is not applied between the both terminals of the ferroelectric capacitors and is in the state where the voltage of positive polarity is applied between the both terminals of the ferroelectric capacitor and is in the state where the voltage of negative polarity is applied between the both terminals of the ferroelectric capacitor

Thus the residual polarization state inside the ferroelectric element is set to either the inverted state non inverted state by applying the pulse voltage toward the first plate line and the second plate line. In addition between the ferroelectric capacitors and and between the ferroelectric capacitors and the mutual residual polarization state becomes reverse. Moreover between the ferroelectric capacitors and and between the ferroelectric capacitors and the mutual residual polarization state also becomes reverse.

Moreover in time point W since the ferroelectric element write signal E is again set to L and the pass switch and the pass switch are turned OFF each driver for data write inverters and in the example of is invalid. In addition although it is unquestioned about the normal operation signal E it is set to L in the example of .

The ferroelectric element both ends short circuit signal FRST is maintained by H from time point W the MOS transistors Q Q Q and Qare turned ON and between each both terminals of the ferroelectric capacitors and are short circuited. Therefore since it is in the state where no voltage is applied to the ferroelectric capacitors and even when it is a case where the voltage variation occurs at the time of the power supply cutoff the voltage which is not aimed to the ferroelectric capacitors and is not applied thereby it becomes possible to avoid data deformation.

In particular in the period T at the time points R to R data read out from the nonvolatile storage elements NVSE and to the volatile storage element VSE is executed.

At the time point R whereas the ferroelectric element both ends short circuit signal FRST is set to L the MOS transistors Q Q Q and Qare turned OFF and it is turned to the state in which the voltage impression toward the ferroelectric capacitors and is possible while the ferroelectric element driving signal PL applied to the second plate line is maintained by L the ferroelectric element driving signal PL applied to the first plate line is set to H . By impression of such the pulse voltage the voltage signal corresponding to the residual polarization state in the ferroelectric capacitor appears as the node voltage V and the node voltage V.

More specifically based on the example of a comparatively low voltage signal the logic is hereinafter referred to WL Weak Low appears as the node voltage V and a comparatively high voltage signal the logic is hereinafter referred to WH Weak Hi appears as the node voltage V. That is it becomes a shape which the voltage difference according to the difference of the residual polarization state in the ferroelectric capacitor occurs between the node voltage V and the node voltage V.

At this time at the time points R to R since the normal operation signal E is set to L and the multiplexer and the second input terminal of the multiplexer is selected the logic of the node voltage V is turns to WL and the logic of the node voltage V is turns to WH. Moreover the logic of the node voltage V is turned to WH and the logic of the node voltage V is turned to WL. Thus at the time points R to R the node voltages V to V of each part is still in an unstable state state where logic inverted in the inverter and the inverter is not performed thoroughly and the output logic does not become L H securely .

At the time point R since the normal operation signal E is set to H and the multiplexer and the first input terminal of the multiplexer is selected the normal loop is formed in the loop structure unit LOOP. With the change of such a signal path the output terminal logic WH of the inverter and the input terminal logic WH of the inverter are connected and the output terminal logic WL of the inverter and the input terminal logic WL of the inverter are connected. Therefore mismatching is not occurred in the signal logic WH WL of each node. Hereinafter while the normal loop is formed in the loop structure unit LOOP the inverter tends to pull up the output logic to H in response to the input of the logic WL and the inverter tends to pull down the output logic to L in response to the input of the logic WH. As a result the output logic of the inverter is settled by L from the unstable logic WL and the output logic of the inverter is settled by H from the unstable logic WH.

At the time point R it becomes a shape where the signal potential difference of the node voltage V and the node voltage V read from the ferroelectric capacitor is amplified in the loop structure unit LOOP with the loop structure unit LOOP being applied into the normal loop and the held data before power supply cutoff is recovered.

At the time point R since the ferroelectric element both ends short circuit signal FRST is again set to H the MOS transistors Q Q Q and Qare turned ON and between each both terminals of the ferroelectric capacitors and is short circuited it is in the state where no voltage is applied to these ferroelectric capacitors and . At this time each of the ferroelectric element driving signal PL applied to the first plate line and the ferroelectric element driving signal PL applied to the second plate line are set to L . Therefore it recovers to the normal operation state as well as the time point W or before.

According to the third embodiment of the present invention also in the case where the controlled system is applied to the nonvolatile CPU when detecting the power supply cutoff turn on and outputting the signal for requesting the backup data restoring recovery of data the data control unit which can secure the period for sufficient backup process which can be processed can be provided.

According to the data control unit according to the third embodiment of the present invention when the controlled system is applied to the nonvolatile CPU which has a power source line of two systems the capacity of the capacitor for performing voltage securing after the power supply cutoff can be applied small.

Moreover according to the data control unit according to the third embodiment of the present invention when the controlled system is applied to the nonvolatile CPU and the value of power supply voltage is varied by the noise on the power source line etc. a useless backup process data restoring recovery can be suppressed.

While the present invention is described in accordance with the aforementioned embodiments it should not be understood that the description and drawings that configure part of this disclosure are to limit the present invention. This disclosure makes clear a variety of alternative embodiments working examples and operational techniques for those skilled in the art.

Accordingly the technical scope of the present invention is defined by the claims that appear appropriate from the above explanation as well as by the spirit of the invention. Various modifications will become possible for those skilled in the art after receiving the teachings of the present disclosure without departing from the scope thereof.

Since the data control unit of the present invention can detect the voltage level of power supply cutoff turn on and sufficient time for backup data restoring recovery of the data of the controlled target circuit can be secured the data control unit of the present invention can be applied to wide fields as the controlled target circuit such as processors such as a logic operation circuit a logic unit CPU MPU and DSP and a game machine and a mobile computing device and becomes advantageous in respect of the data protection at the time of battery exhaustion etc. in particular in battery powered devices.

